<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†æŠ€æœ¯è¯¦è§£ | é£æ§æŠ€æœ¯æ–‡æ¡£</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            color: #333;
            padding-top: 4rem;
            background-color: #f8f9fa;
        }

        .doc-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
            border-radius: 0 0 15px 15px;
        }

        .doc-toc {
            position: sticky;
            top: 2rem;
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }

        .doc-content {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }

        .doc-section {
            margin-bottom: 3rem;
        }

        .doc-section h2 {
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }

        .doc-section h3 {
            color: var(--secondary-color);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        .code-block {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            position: relative;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e9ecef;
        }

        .code-lang {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--secondary-color);
            background-color: rgba(52, 152, 219, 0.1);
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
        }

        .code-copy {
            background: none;
            border: none;
            color: #6c757d;
            cursor: pointer;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
        }

        .code-copy:hover {
            color: var(--secondary-color);
        }

        .code-copy.copied {
            color: var(--accent-color);
        }

        .image-container {
            text-align: center;
            margin: 2rem 0;
        }

        .image-container img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .image-caption {
            font-style: italic;
            color: #6c757d;
            margin-top: 0.5rem;
        }

        .note-box {
            background-color: #e8f4f8;
            border-left: 4px solid var(--secondary-color);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .warning-box {
            background-color: #fef3e2;
            border-left: 4px solid var(--accent-color);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 4px;
        }

        .tag {
            display: inline-block;
            background-color: #e9ecef;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--secondary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .back-to-top.show {
            opacity: 1;
        }

        .performance-table {
            font-size: 0.9rem;
        }

        .performance-table th {
            background-color: var(--secondary-color);
            color: white;
        }

        .nav-breadcrumb {
            background-color: #f8f9fa;
            padding: 1rem 0;
            margin-bottom: 2rem;
            border-radius: 0 0 8px 8px;
        }

        @media (max-width: 768px) {
            .doc-toc {
                position: static;
                margin-bottom: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="content-security-work.html">
                <i class="bi bi-arrow-left me-2"></i>è¿”å›å·¥ä½œè®°å½•
            </a>
        </div>
    </nav>

    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <div class="nav-breadcrumb">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="index.html">é¦–é¡µ</a></li>
                    <li class="breadcrumb-item"><a href="content-security-work.html">é£æ§å·¥ä½œè®°å½•</a></li>
                    <li class="breadcrumb-item active">ä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†</li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- æ–‡æ¡£å¤´éƒ¨ -->
    <header class="doc-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <span class="badge bg-light text-dark mb-2">æŠ€æœ¯æ–‡æ¡£</span>
                    <h1 class="display-5 fw-bold">ä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†æŠ€æœ¯è¯¦è§£</h1>
                    <p class="lead">å…¨é¢è§£æä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†çš„å…³é”®æŠ€æœ¯ä¸å®è·µåº”ç”¨</p>
                    <div class="d-flex flex-wrap mt-3">
                        <span class="tag">æ–‡æœ¬é¢„å¤„ç†</span>
                        <span class="tag">è‡ªç„¶è¯­è¨€å¤„ç†</span>
                        <span class="tag">å†…å®¹å®‰å…¨</span>
                        <span class="tag">å­—ç¬¦æ ‡å‡†åŒ–</span>
                        <span class="tag">Python</span>
                    </div>
                </div>
                <div class="col-lg-4 text-lg-end">
                    <div class="text-white-50">
                        <p><i class="bi bi-calendar me-2"></i>å‘å¸ƒæ—¥æœŸ: 2025å¹´10æœˆ18æ—¥</p>
                        <p><i class="bi bi-person me-2"></i>ä½œè€…: siriJR</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="row">
            <!-- æ–‡æ¡£ç›®å½• -->
            <div class="col-lg-3">
                <div class="doc-toc">
                    <h5>æ–‡æ¡£ç›®å½•</h5>
                    <nav id="table-of-contents">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link" href="#introduction">1. å¼•è¨€</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#importance">2. é¢„å¤„ç†çš„é‡è¦æ€§</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#character-processing">3. å­—ç¬¦å¤„ç†æŠ€æœ¯</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#special-processing">4. ç‰¹æ®Šå†…å®¹å¤„ç†</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#implementation">5. å®Œæ•´å®ç°</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#application">6. åº”ç”¨åœºæ™¯</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#conclusion">7. æ€»ç»“</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>

            <!-- æ–‡æ¡£å†…å®¹ -->
            <div class="col-lg-9">
                <div class="doc-content">
                    <!-- æ‘˜è¦ -->
                    <div class="alert alert-info">
                        <h5><i class="bi bi-info-circle"></i> æ‘˜è¦</h5>
                        <p class="mb-0">æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†ä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†çš„å…³é”®æŠ€æœ¯ï¼ŒåŒ…æ‹¬å­—ç¬¦æ ‡å‡†åŒ–ã€ç‰¹æ®Šç¬¦å·å¤„ç†ã€ç¹ä½“è½¬ç®€ä½“ã€æ‹¼éŸ³è½¬æ¢ã€è¡¨æƒ…ç¬¦å·å¤„ç†ä»¥åŠä¸šåŠ¡ç‰¹å®šå†…å®¹è¯†åˆ«ç­‰ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„é¢„å¤„ç†æµç¨‹ï¼Œå¯ä»¥æœ‰æ•ˆæå‡åç»­NLPä»»åŠ¡çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚</p>
                    </div>

                    <!-- 1. å¼•è¨€ -->
                    <section id="introduction" class="doc-section">
                        <h2>1. å¼•è¨€</h2>
                        <p>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†(NLP)å’Œå†…å®¹å®‰å…¨é¢†åŸŸï¼Œæ–‡æœ¬é¢„å¤„ç†æ˜¯è‡³å…³é‡è¦çš„ä¸€æ­¥ã€‚ç‰¹åˆ«æ˜¯å¯¹äºä¸­æ–‡æ–‡æœ¬ï¼Œç”±äºå­˜åœ¨ç¹ç®€ä½“ã€å…¨åŠè§’ã€ç‰¹æ®Šç¬¦å·ã€è¡¨æƒ…ç¬¦å·ç­‰å¤šç§å¤æ‚æƒ…å†µï¼Œé¢„å¤„ç†çš„è´¨é‡ç›´æ¥å½±å“åç»­åˆ†æä»»åŠ¡çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚</p>

                        <p>æœ¬æ–‡åŸºäºå®é™…é¡¹ç›®ç»éªŒï¼Œç³»ç»Ÿæ€§åœ°ä»‹ç»ä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†çš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬å­—ç¬¦æ ‡å‡†åŒ–ã€ç‰¹æ®Šç¬¦å·å¤„ç†ã€ç¹ä½“è½¬ç®€ä½“ã€æ‹¼éŸ³è½¬æ¢ã€è¡¨æƒ…ç¬¦å·å¤„ç†ä»¥åŠä¸šåŠ¡ç‰¹å®šå†…å®¹è¯†åˆ«ç­‰å…³é”®æŠ€æœ¯ã€‚è¿™äº›æŠ€æœ¯ç‰¹åˆ«é€‚ç”¨äºå†…å®¹å®‰å…¨ã€ååƒåœ¾ã€æ–‡æœ¬åˆ†ç±»ç­‰åœºæ™¯ã€‚</p>

                        <div class="note-box">
                            <strong>é€‚ç”¨åœºæ™¯:</strong> ä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†å¹¿æ³›åº”ç”¨äºå†…å®¹å®¡æ ¸ã€æƒ…æ„Ÿåˆ†æã€æ–‡æœ¬åˆ†ç±»ã€æœç´¢å¼•æ“ã€èŠå¤©æœºå™¨äººç­‰å¤šç§NLPåº”ç”¨åœºæ™¯ã€‚
                        </div>
                    </section>

                    <!-- 2. é¢„å¤„ç†çš„é‡è¦æ€§ -->
                    <section id="importance" class="doc-section">
                        <h2>2. é¢„å¤„ç†çš„é‡è¦æ€§</h2>

                        <h3>2.1 æå‡æ¨¡å‹æ€§èƒ½</h3>
                        <p>è‰¯å¥½çš„æ–‡æœ¬é¢„å¤„ç†å¯ä»¥æ˜¾è‘—æå‡NLPæ¨¡å‹çš„æ€§èƒ½ï¼š</p>
                        <ul>
                            <li><strong>å‡å°‘å™ªå£°</strong>: å»é™¤æ— å…³å­—ç¬¦ã€ç¬¦å·å’Œæ ¼å¼é—®é¢˜</li>
                            <li><strong>ç»Ÿä¸€è¡¨ç¤º</strong>: å°†ä¸åŒå½¢å¼çš„åŒä¸€å†…å®¹æ ‡å‡†åŒ–</li>
                            <li><strong>å¢å¼ºæ³›åŒ–èƒ½åŠ›</strong>: å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°ç†è§£æ–‡æœ¬è¯­ä¹‰</li>
                        </ul>

                        <h3>2.2 åº”å¯¹ä¸­æ–‡ç‰¹æœ‰æŒ‘æˆ˜</h3>
                        <p>ä¸­æ–‡æ–‡æœ¬å¤„ç†é¢ä¸´ä¸€äº›ç‰¹æœ‰æŒ‘æˆ˜ï¼š</p>
                        <ul>
                            <li><strong>å­—ç¬¦ç¼–ç å¤šæ ·æ€§</strong>: å…¨è§’/åŠè§’ã€ç¹ç®€ä½“ã€ç‰¹æ®Šç¬¦å·</li>
                            <li><strong>ç»„åˆå­—ç¬¦é—®é¢˜</strong>: Unicodeç»„åˆç¬¦å·å¯¼è‡´çš„æ˜¾ç¤ºé—®é¢˜</li>
                            <li><strong>å˜ä½“è¡¨è¾¾</strong>: åŒéŸ³å­—ã€å½¢è¿‘å­—ã€ç½‘ç»œç”¨è¯­</li>
                            <li><strong>éšè”½è”ç³»æ–¹å¼</strong>: åˆ»æ„éšè—çš„å¾®ä¿¡ã€QQç­‰è”ç³»æ–¹å¼</li>
                        </ul>

                        <div class="image-container">
                            <div style="background:#f0f0f0; padding:2rem; border-radius:8px; text-align:center;">
                                <p>åŸå§‹æ–‡æœ¬ â†’ å­—ç¬¦æ ‡å‡†åŒ– â†’ ç‰¹æ®Šå¤„ç† â†’ ä¸šåŠ¡å¤„ç† â†’ æ ‡å‡†åŒ–è¾“å‡º</p>
                            </div>
                            <div class="image-caption">å›¾1: ä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†æµç¨‹ç¤ºæ„å›¾</div>
                        </div>
                    </section>

                    <!-- 3. å­—ç¬¦å¤„ç†æŠ€æœ¯ -->
                    <section id="character-processing" class="doc-section">
                        <h2>3. å­—ç¬¦å¤„ç†æŠ€æœ¯</h2>

                        <h3>3.1 å…¨è§’è½¬åŠè§’</h3>
                        <p>å°†å…¨è§’å­—ç¬¦è½¬æ¢ä¸ºåŠè§’å­—ç¬¦ï¼Œç»Ÿä¸€å­—ç¬¦è¡¨ç¤ºï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">def sbcCase(self, text):
    """è½¬æ¢å…¨è§’å­—ç¬¦ä¸ºåŠè§’å­—ç¬¦"""
    return self.strtr(text, {
        "ï¼": "0", "ï¼‘": "1", "ï¼’": "2", "ï¼“": "3", "ï¼”": "4",
        "ï¼•": "5", "ï¼–": "6", "ï¼—": "7", "ï¼˜": "8", "ï¼™": "9",
        'ï¼¡': 'A', 'ï¼¢': 'B', 'ï¼£': 'C', 'ï¼¤': 'D', 'ï¼¥': 'E',
        # ... æ›´å¤šå­—ç¬¦æ˜ å°„
    })</code></pre>
                        </div>

                        <h3>3.2 ç‰¹æ®Šæ•°å­—ç¬¦å·å¤„ç†</h3>
                        <p>å¤„ç†å„ç§ç‰¹æ®Šæ•°å­—è¡¨ç¤ºå½¢å¼ï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">def circleCase(self, text):
    """è½¬æ¢â‘ æ•°å­—ä¸ºåŠè§’æ•°å­—"""
    return self.strtr(text, {
        "â€": "1", "â": "2", "â‚": "3", "âƒ": "4", "â„": "5",
        "â…": "6", "â†": "7", "â‡": "8", "âˆ": "9", "â‘ ": "1",
        "â‘¡": "2", "â‘¢": "3", "â‘£": "4", "â‘¤": "5", "â‘¥": "6",
        # ... æ›´å¤šæ•°å­—ç¬¦å·æ˜ å°„
    })</code></pre>
                        </div>

                        <h3>3.3 å»é™¤ç»„åˆå­—ç¬¦</h3>
                        <p>å¤„ç†Unicodeç»„åˆç¬¦å·ï¼Œè§£å†³æ˜¾ç¤ºå¼‚å¸¸é—®é¢˜ï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">def dropUnicodeChar(self, text):
    """å‰”é™¤ç»„åˆå­—ç¬¦--éå¸¸æœ‰ç”¨"""
    result = []
    for char in text:
        if char.isdigit():
            result.append(char)
        else:
            # è¿‡æ»¤æ‰€æœ‰Unicodeç»„åˆç¬¦å·
            category = unicodedata.category(char)
            if not category.startswith('M'):
                result.append(char)
    return ''.join(result)</code></pre>
                        </div>

                        <h3>3.4 ç¹ä½“è½¬ç®€ä½“</h3>
                        <p>å°†ç¹ä½“ä¸­æ–‡è½¬æ¢ä¸ºç®€ä½“ä¸­æ–‡ï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">def Traditional2Simplified(self, sentence):
    """è½¬ä¸ºç®€ä½“"""
    sentence = Converter('zh-hans').convert(sentence)
    return sentence</code></pre>
                        </div>

                        <div class="note-box">
                            <strong>æ³¨æ„:</strong> éœ€è¦ä½¿ç”¨<code>langconv</code>åº“è¿›è¡Œç¹ç®€è½¬æ¢ï¼Œè¯¥åº“åŸºäºOpenCCå®ç°ï¼Œè½¬æ¢å‡†ç¡®ç‡é«˜ã€‚
                        </div>
                    </section>

                    <!-- 4. ç‰¹æ®Šå†…å®¹å¤„ç† -->
                    <section id="special-processing" class="doc-section">
                        <h2>4. ç‰¹æ®Šå†…å®¹å¤„ç†</h2>

                        <h3>4.1 è¡¨æƒ…ç¬¦å·å¤„ç†</h3>
                        <p>å°†è¡¨æƒ…ç¬¦å·è½¬æ¢ä¸ºå¯è¯»çš„æ–‡æœ¬æè¿°ï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">def emojiCase(self, text, language='zh'):
    """
    è¾“å…¥ï¼šğŸš€ğŸŒ•
    è¾“å‡ºï¼šç«ç®­ æ»¡æœˆ
    """
    tmp = emoji.demojize(text, language=language)
    return tmp.replace(" ", "").replace(":", "")</code></pre>
                        </div>

                        <h3>4.2 ä¸šåŠ¡ç‰¹å®šå†…å®¹è¯†åˆ«</h3>
                        <p>è¯†åˆ«å’Œæ›¿æ¢ç‰¹å®šçš„ä¸šåŠ¡å†…å®¹ï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">def specialBizCase(self, text):
    # æ›¿æ¢ç½‘ç»œç”¨è¯­å’Œå˜ä½“è¡¨è¾¾
    text = self.strtr(text, {
        "yyds": "æ°¸è¿œçš„ç¥", "cnm": "æ“ä½ å¦ˆ", "sb": "å‚»b",
        "æ³¡æ³¡": "å¾®ä¿¡", "mm": "å¦¹å¦¹", "é•é“": "ç¾å¥³"
    })

    # è¯†åˆ«å’Œæ›¿æ¢è”ç³»æ–¹å¼
    # æ‰‹æœºå·æ›¿æ¢
    regex = re.compile("(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}")
    text = re.sub(regex, "#æ‰‹æœºå·", text)

    # é‚®ç®±æ›¿æ¢
    regex = re.compile("[*#\\u4e00-\\u9fa5 a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}")
    text = re.sub(regex, "#é‚®ç®±", text)

    return text</code></pre>
                        </div>

                        <h3>4.3 éšè”½è”ç³»æ–¹å¼æ£€æµ‹</h3>
                        <p>æ£€æµ‹å˜ä½“è”ç³»æ–¹å¼ï¼Œå¦‚åˆ»æ„éšè—çš„å¾®ä¿¡/QQï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">def detectStealthContact(self, text):
    """æ£€æµ‹æ–‡æœ¬ä¸­æ˜¯å¦åŒ…å«å˜ä½“è”ç³»æ–¹å¼"""
    # åŒ¹é… "åŠ å¾®ä¿¡" å˜ä½“
    wx = r'(?i)([åŠ å®¶çˆä¼½ç”²è´¾â•ï¼‹âœš]|%2[bB]|åŠ [^a-zA-Z0-9]*?[å¾®è–‡vV])[^a-zA-Z0-9]*?[å¾®å«é­ç°å¾½å¨å°¾è–‡vVâœ‰ï¸â¤ï¸â¤ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ–¤ğŸ’”â£ğŸ’•ğŸ’ğŸ’“ğŸ’—ğŸ’–ğŸ’˜ğŸ’ğŸ’ŸxX]'

    # åŒ¹é… "åŠ QQ" å˜ä½“
    qq = r'(?i)([åŠ å®¶çˆä¼½ç”²è´¾â•ï¼‹âœš]|%2[bB]|åŠ [^a-zA-Z0-9\u4e00-\u9fa5]*?[qQ])[^a-zA-Z0-9\u4e00-\u9fa5]*?[qQğŸ…€ğŸ†€ğŸ¬â’¬â“ ]'

    for match in re.finditer(wx, text):
        if match:
            return text + "#åŠ å¾®ä¿¡"

    for match in re.finditer(qq, text):
        if match:
            return text + "#åŠ qq"

    return text</code></pre>
                        </div>

                        <h3>4.4 æ‹¼éŸ³æ•æ„Ÿè¯æ£€æµ‹</h3>
                        <p>é€šè¿‡æ‹¼éŸ³æ£€æµ‹æ½œåœ¨çš„æ•æ„Ÿå†…å®¹ï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">def pinyinReplace(self, text):
    """æ£€æµ‹æ‹¼éŸ³å½“ä¸­æ˜¯å¦æœ‰æ•æ„Ÿè¯"""
    textPingying = self.zh2pinyin(text)

    keyWords = {
        "meizi": "å¦¹å­", "koukou": "qq", "weixin": "å¾®ä¿¡",
        "cao": "æ“", "caonima": "æ“ä½ å¦ˆ", "nima": "ä½ å¦ˆçš„"
    }

    for i in keyWords.keys():
        if textPingying.find(i) > -1:
            return text + "#pingyin:" + keyWords.get(i)
    return text</code></pre>
                        </div>
                    </section>

                    <!-- 5. å®Œæ•´å®ç° -->
                    <section id="implementation" class="doc-section">
                        <h2>5. å®Œæ•´å®ç°</h2>

                        <h3>5.1 é¢„å¤„ç†ä¸»æµç¨‹</h3>
                        <p>æ•´åˆæ‰€æœ‰é¢„å¤„ç†æ­¥éª¤çš„å®Œæ•´å®ç°ï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python">
    """å®Œæ•´çš„é¢„å¤„ç†æµç¨‹"""
#! /usr/bin/env python3

import re
import emoji

import unicodedata
from .langconv import Converter
from .pinyinyLocal import PinyinyLocal

class TextPreprocess:

    def __init__(self):
        self.py = PinyinyLocal()


    #ç‰¹å®šå­—ç¬¦æ›¿æ¢
    def strtr(self,text, replace):
        for s, r in replace.items():
            text = text.replace(s, r)
        return text

    # ä¸­æ–‡è½¬æ‹¼éŸ³
    def zh2pinyin(self,sentence):
        out = self.py.get_pinyin(sentence)
        return out

    # è½¬ä¸ºç®€ä½“
    def Traditional2Simplified(self,sentence):
        sentence = Converter('zh-hans').convert(sentence)
        return sentence

    # è½¬ä¸ºç¹ä½“
    def Simplified2Traditional(self,sentence):
        sentence = Converter('zh-hant').convert(sentence)
        return sentence

    # å»é™¤å­—æ¯æ•°å­—è¡¨æƒ…å’Œå…¶å®ƒå­—ç¬¦
    def clear_character(self,text):
        pattern1 = '[a-zA-Z0-9]'
        pattern2 = '\[.*?\]'
        pattern3 = re.compile(u'[^\s1234567890:ï¼š' + '\u4e00-\u9fa5]+')
        pattern4 = '[â€™!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~]+'
        line1 = re.sub(pattern1, '', text)  # å»é™¤è‹±æ–‡å­—æ¯å’Œæ•°å­—
        line2 = re.sub(pattern2, '', line1)  # å»é™¤è¡¨æƒ…
        line3 = re.sub(pattern3, '', line2)  # å»é™¤å…¶å®ƒå­—ç¬¦
        line4 = re.sub(pattern4, '', line3)  # å»æ‰æ®‹ç•™çš„å†’å·åŠå…¶å®ƒç¬¦å·
        new_sentence = ''.join(line4.split())  # å»é™¤ç©ºç™½
        return new_sentence


    def stopWordCase(self,text):
        """
        å»æ‰åœç”¨è¯
        :param text:
        :return:
        """
        stopwords_dict = {
            '!': '',
            '.': '',
            ',': '',
            '#': '',
            '$': '',
            '%': '',
            '&': '',
            '*': '',
            '(': '',
            ')': '',
            '|': '',
            '?': '',
            '/': '',
            '@': '',
            '\'': '',
            '\'': '',
            ';': '',
            '[': '',
            ']': '',
            '{': '',
            '}': '',
            '+': '',
            '~': '',
            '-': '',
            '_': '',
            '=': '',
            '^': '',
            '<': '',
            '>': '',
            'ã€€': '',
            'ï¼': '',
            'ã€‚': '',
            'ï¼Œ': '',
            'ï¿¥': '',
            'ï¼ˆ': '',
            'ï¼‰': '',
            'ï¼Ÿ': '',
            'ã€': '',
            'â€œ': '',
            'â€˜': '',
            'ï¼›': '',
            'ã€': '',
            'ã€‘': '',
            'â€”â€”': '',
            'â€¦â€¦': '',
            'ã€Š': '',
            'ã€‹': ''
        }
        return self.strtr(text, stopwords_dict)


    def sbcCase(self,text):
        """è½¬æ¢å…¨è§’å­—ç¬¦ä¸ºåŠè§’å­—ç¬¦
        SBC case to DBC case
        """
        return self.strtr(text, {
            "ï¼": "0", "ï¼‘": "1", "ï¼’": "2", "ï¼“": "3", "ï¼”": "4",
            "ï¼•": "5", "ï¼–": "6", "ï¼—": "7", "ï¼˜": "8", "ï¼™": "9",
            'ï¼¡': 'A', 'ï¼¢': 'B', 'ï¼£': 'C', 'ï¼¤': 'D', 'ï¼¥': 'E',
            'ï¼¦': 'F', 'ï¼§': 'G', 'ï¼¨': 'H', 'ï¼©': 'I', 'ï¼ª': 'J',
            'ï¼«': 'K', 'ï¼¬': 'L', 'ï¼­': 'M', 'ï¼®': 'N', 'ï¼¯': 'O',
            'ï¼°': 'P', 'ï¼±': 'Q', 'ï¼²': 'R', 'ï¼³': 'S', 'ï¼´': 'T',
            'ï¼µ': 'U', 'ï¼¶': 'V', 'ï¼·': 'W', 'ï¼¸': 'X', 'ï¼¹': 'Y',
            'ï¼º': 'Z', 'ï½': 'a', 'ï½‚': 'b', 'ï½ƒ': 'c', 'ï½„': 'd',
            'ï½…': 'e', 'ï½†': 'f', 'ï½‡': 'g', 'ï½ˆ': 'h', 'ï½‰': 'i',
            'ï½Š': 'j', 'ï½‹': 'k', 'ï½Œ': 'l', 'ï½': 'm', 'ï½': 'n',
            'ï½': 'o', 'ï½': 'p', 'ï½‘': 'q', 'ï½’': 'r', 'ï½“': 's',
            'ï½”': 't', 'ï½•': 'u', 'ï½–': 'v', 'ï½—': 'w', 'ï½˜': 'x',
            'ï½™': 'y', 'ï½š': 'z',
        })

    def circleCase(self,text):
        """è½¬æ¢â‘ æ•°å­—ä¸ºåŠè§’æ•°å­—
        â‘ â‘¡â‘¢â‘£â‘¤â‘¥â‘¦â‘§â‘¨â‘© case å…¨è§’
        â¹â¸â½â¼â½â¼â¾â½â¼
        â€ââ‚âƒâ„â…â†â‡âˆ
        """
        return self.strtr(text, {
            "â€": "1", "â": "2", "â‚": "3", "âƒ": "4", "â„": "5",
            "â…": "6", "â†": "7", "â‡": "8", "âˆ": "9", "â‘ ": "1",
            "â‘¡": "2", "â‘¢": "3", "â‘£": "4", "â‘¤": "5", "â‘¥": "6",
            "â‘¦": "7", "â‘§": "8", "â‘¨": "9", "â¶": "1", "â·": "2",
            "â¸": "3", "â¹": "4", "âº": "5", "â»": "6", "â¼": "7",
            "â½": "8", "â¾": "9", "âŠ": "1", "â‹": "2", "âŒ": "3",
            "â": "4", "â": "5", "â": "6", "â": "7", "â‘": "8",
            "â’": "9", 'â’¶': 'A', 'â’·': 'B', 'â’¸': 'C', 'â’¹': 'D',
            'â’º': 'E', 'â’»': 'F', 'â’¼': 'G', 'â’½': 'H', 'â’¾': 'I',
            'â’¿': 'J', 'â“€': 'K', 'â“': 'L', 'â“‚': 'M', 'â“ƒ': 'N',
            'â“„': 'O', 'â“…': 'P', 'â“†': 'Q', 'â“‡': 'R', 'â“ˆ': 'S',
            'â“‰': 'T', 'â“Š': 'U', 'â“‹': 'V', 'â“Œ': 'W', 'â“': 'X',
            'â“': 'Y', 'â“': 'Z', 'â“': 'a', 'â“‘': 'b', 'â“’': 'c',
            'â““': 'd', 'â“”': 'e', 'â“•': 'f', 'â“–': 'g', 'â“—': 'h',
            'â“˜': 'i', 'â“™': 'j', 'â“š': 'k', 'â“›': 'l', 'â“œ': 'm',
            'â“': 'n', 'â“': 'o', 'â“Ÿ': 'p', 'â“ ': 'q', 'â“¡': 'r',
            'â“¢': 's', 'â“£': 't', 'â“¤': 'u', 'â“¥': 'v', 'â“¦': 'w',
            'â“§': 'x', 'â“¨': 'y', 'â“©': 'z',
            "ãŠ€": "ä¸€", "ãŠ": "äºŒ", "ãŠ‚": "ä¸‰", "ãŠƒ": "å››",
            "ãŠ„": "äº”", "ãŠ…": "å…­", "ãŠ†": "ä¸ƒ", "ãŠ‡": "å…«",
            "ãŠˆ": "ä¹",
        })

    def bracketCase(self,text):
        """è½¬æ¢â‘´æ•°å­—ä¸ºåŠè§’æ•°å­—
        â‘´ â‘µ â‘¶ â‘· â‘¸ â‘¹ â‘º â‘» â‘¼case å…¨è§’
        """
        return self.strtr(text, {
            "â‘´": "1", "â‘µ": "2", "â‘¶": "3", "â‘·": "4", "â‘¸": "5",
            "â‘¹": "6", "â‘º": "7", "â‘»": "8", "â‘¼": "9",
            'ğŸ„': 'A', 'ğŸ„‘': 'B', 'ğŸ„’': 'C', 'ğŸ„“': 'D', 'ğŸ„”': 'E',
            'ğŸ„•': 'F', 'ğŸ„–': 'G', 'ğŸ„—': 'H', 'ğŸ„˜': 'I', 'ğŸ„™': 'J',
            'ğŸ„š': 'K', 'ğŸ„›': 'L', 'ğŸ„œ': 'M', 'ğŸ„': 'N', 'ğŸ„': 'O',
            'ğŸ„Ÿ': 'P', 'ğŸ„ ': 'Q', 'ğŸ„¡': 'R', 'ğŸ„¢': 'S', 'ğŸ„£': 'T',
            'ğŸ„¤': 'U', 'ğŸ„¥': 'V', 'ğŸ„¦': 'W', 'ğŸ„§': 'X', 'ğŸ„¨': 'Y',
            'ğŸ„©': 'Z', 'â’œ': 'a', 'â’': 'b', 'â’': 'c', 'â’Ÿ': 'd',
            'â’ ': 'e', 'â’¡': 'f', 'â’¢': 'g', 'â’£': 'h', 'â’¤': 'i',
            'â’¥': 'j', 'â’¦': 'k', 'â’§': 'l', 'â’¨': 'm', 'â’©': 'n',
            'â’ª': 'o', 'â’«': 'p', 'â’¬': 'q', 'â’­': 'r', 'â’®': 's',
            'â’¯': 't', 'â’°': 'u', 'â’±': 'v', 'â’²': 'w', 'â’³': 'x',
            'â’´': 'y', 'â’µ': 'z',
            "ãˆ ": "ä¸€", "ãˆ¡": "äºŒ", "ãˆ¢": "ä¸‰", "ãˆ£": "å››",
            "ãˆ¤": "äº”", "ãˆ¥": "å…­", "ãˆ¦": "ä¸ƒ", "ãˆ§": "å…«",
            "ãˆ¨": "ä¹",
        })

    def dotCase(self,text):
        """è½¬æ¢â‘´æ•°å­—ä¸ºåŠè§’æ•°å­—
        â’ˆâ’‰â’Šâ’‹â’Œâ’â’â’â’case å…¨è§’
        """
        return self.strtr(text, {
            "â’ˆ": "1",
            "â’‰": "2",
            "â’Š": "3",
            "â’‹": "4",
            "â’Œ": "5",
            "â’": "6",
            "â’": "7",
            "â’": "8",
            "â’": "9",
        })

    def specialCase(self,text):
        """ç‰¹æ®Šå­—ç¬¦æ¯”å¦‚å¸Œè…Šå­—ç¬¦ï¼Œè¥¿é‡Œå°”å­—æ¯
        """
        return self.strtr(text, {
            # å¸Œè…Šå­—æ¯
            "Î‘": "A", "Î’": "B", "Î•": "E", "Î–": "Z", "Î—": "H",
            "Î™": "I", "Îš": "K", "Îœ": "M", "Î": "N", "ÎŸ": "O",
            "Î¡": "P", "Î¤": "T", "Î§": "X", "Î±": "a", "Î²": "b",
            "Î³": "y", "Î¹": "l", "Îº": "k", "Î¼": "u", "Î½": "v",
            "Î¿": "o", "Ï": "p", "Ï„": "t", "Ï‡": "x",

            # è¥¿é‡Œå°”å­—æ¯ (U+0400 - U+04FF)
            "Ğ€": "E", "Ğ": "E", "Ğ…": "S", "Ğ†": "I", "Ğ‡": "I",
            "Ğˆ": "J", "ĞŒ": "K", "Ğ": "A", "Ğ’": "B", "Ğ•": "E",
            "Ğ—": "3", "Î–": "Z", "Ğ˜": "N", "Ğœ": "M", "Ğ": "H",
            "Ğ": "O", "Ğ ": "P", "Ğ¡": "C", "Ğ¢": "T", "Ğ£": "y",
            "Ğ¥": "X", "Ğ¬": "b", "Ğª": "b", "Ğ°": "a", "Ğ²": "B",
            "Ğµ": "e", "Ğº": "K", "Ğ¼": "M", "Ğ½": "H", "Ğ¾": "O",
            "Ğ¿": "n", "Ñ€": "P", "Ñ": "c", "Ñ‚": "T", "Ñƒ": "y",
            "Ñ…": "x", "Ñˆ": "w", "ÑŒ": "b", "Ñ•": "s", "Ñ–": "i",
            "Ñ˜": "j",

            "Ã€": "A", "Ã": "A", "Ã‚": "A", "Ãƒ": "A", "Ã„": "A", "Ã…": "A", "Ä€": "A", "Ä‚": "A", "Ä‚": "A",
            "Ã‡": "C", "Ä†": "C", "Äˆ": "C", "ÄŠ": "C",
            "Ã": "D", "Ä": "D", "Ä": "D",
            "Ãˆ": "E", "Ã‰": "E", "ÃŠ": "E", "Ã‹": "E", "Ä’": "E", "Ä–": "E", "Ä˜": "E", "Äš": "E",
            "Äœ": "G", "Ä ": "G", "Ä¢": "G",
            "Ä¤": "H", "Ä¦": "H",
            "ÃŒ": "I", "Ã": "I", "Ã®": "I", "Ã¯": "I", "Ä¯": "I",
            "Ä´": "J",
            "Ä¶": "K",
            "Ä»": "L", "Å": "L",
            "Ã‘": "N", "Åƒ": "N", "Å…": "N", "Å‡": "N",
            "Ã’": "O", "Ã“": "O", "Ã”": "O", "Ã•": "O", "Ã–": "O", "Å": "O",
            "Å”": "R", "Å˜": "R",
            "Åš": "S", "Åœ": "S", "Å": "S", "Å ": "S", "È˜": "S",
            "Å¢": "T", "Å¤": "T", "Èš": "T",
            "Ã™": "U", "Ãš": "U", "Ã›": "U", "Ãœ": "U", "Åª": "U", "Å¬": "U", "Å®": "U", "Å°": "U", "Å²": "U",
            "Å´": "W",
            "Ã": "Y", "Å¶": "Y", "Å¸": "Y",
            "Å¹": "Z", "Å»": "Z", "Å½": "Z",

            "Ã ": "a", "Ã¡": "a", "Ã¢": "a", "Ã£": "a", "Ã¤": "a", "Ã¥": "a", "Ä": "a", "Äƒ": "a", "Ä…": "a",
            "Ã§": "c", "Ä‡": "c", "Ä‰": "c", "Ä‹": "c",
            "Ä": "d", "Ä‘": "d",
            "Ã¨": "e", "Ã©": "e", "Ãª": "e", "Ã«": "e", "Ä“": "e", "Ä—": "e", "Ä™": "e", "Ä›": "e", "É™": "e",
            "Ä": "g", "Ä¡": "g", "Ä£": "g",
            "Ä¥": "h", "Ä§": "h",
            "Ã¬": "i", "Ã­": "i", "Ã®": "i", "Ã¯": "i", "Ä«": "i", "Ä¯": "i",
            "Äµ": "j",
            "Ä·": "k",
            "Ä¼": "l",
            "Ã±": "n", "Å„": "n", "Å†": "n", "Åˆ": "n",
            "Ã²": "o", "Ã³": "o", "Ã´": "o", "Ãµ": "o", "Ã¶": "o", "Å‘": "o", "Å•": "r", "Å™": "r",
            "Å›": "s", "Å": "s", "ÅŸ": "s", "Å¡": "s", "È™": "s",
            "Å£": "t", "Å¥": "t", "È›": "t",
            "Ã¹": "u", "Ãº": "u", "Ã»": "u", "Ã¼": "u", "Å«": "u", "Å­": "u", "Å¯": "u", "Å±": "u", "Å³": "u",
            "Åµ": "w",
            "Ã½": "y", "Å·": "y", "Ã¿": "y",
            "Åº": "z", "Å¼": "z", "Å¾": "z",

            # ç½—é©¬æ•°å­—Roman numerals
            "â… ": "I", "â…¡": "II", "â…¢": "III", "â…£": "IV", "â…¤": "V", "â…¥": "VI", "â…¦": "VII",
            "â…§": "VIII", "â…¨": "IX", "â…©": "X", "â…ª": "XI", "â…«": "XII", "â…¬": "L", "â…­": "C",
            "â…®": "D", "â…¯": "M",
            "â…°": "i", "â…±": "ii", "â…²": "iii", "â…³": "iv", "â…´": "v", "â…µ": "vi", "â…¶": "vii",
            "â…·": "viii", "â…¸": "ix", "â…¹": "x", "â…º": "xi", "â…»": "xii", "â…¼": "l", "â…½": "c",
            "â…¾": "d", "â…¿": "m",
        })

    def emojiCase(self,text, language='zh'):
        """
        è¾“å…¥ï¼šğŸš€ğŸŒ•
        è¾“å‡ºï¼šç«ç®­ æ»¡æœˆ  ': è™¾ : : é¸¡ : 8 è§è¯'
        """
        tmp=emoji.demojize(text, language=language)
        return tmp.replace(" ","").replace(":","")

    def specialBizCase(self,text):
        #å»ç©ºæ ¼
        regex = re.compile("\s+")
        text=re.sub(regex, " ", text.strip())
        #æ•°å­—æ›¿æ¢
        regex = re.compile("é›¶|ï¼|Âº|â°|Â°|â‚€|ï¼|â“¿|â“ª|0âƒ£ï¸")
        text=re.sub(regex, "0",text)
        regex = re.compile("ä¸€|â‘ |â€|â‘´|â’ˆ|â¶|ãˆ |Â¹|â‚|ï¼‘|â™³|â“µ|I|1âƒ£ï¸")
        text=re.sub(regex, "1",text)
        regex = re.compile("äºŒ|â‘¡|â|â‘µ|â’‰|â·|ãˆ¡|Â²|â‚‚|ï¼’|â™´|â“¶|2âƒ£ï¸")
        text=re.sub(regex, "2",text)
        regex = re.compile("ä¸‰|â‘¢|â‚|â‘¶|â’Š|â¸|ãˆ¢|Â³|â‚ƒ|3|â™µ|â“·|3âƒ£ï¸")
        text=re.sub(regex, "3",text)
        regex = re.compile("å››|â‘£|âƒ|â‘·|â’‹|â¹|ãˆ£|â´|â‚„|ï¼”|â™¶|â“¸|4âƒ£ï¸")
        text=re.sub(regex, "4",text)
        regex = re.compile("äº”|â‘¤|â„|â‘¸|â’Œ|âº|ãˆ¤|âµ|â‚…|ï¼•|â™·|â“¹|5âƒ£ï¸")
        text=re.sub(regex, "5",text)
        regex = re.compile("å…­|â‘¥|â…|â‘¹|â’|â»|ãˆ¥|â¶|â‚†|6|â™¸|â“º|6âƒ£ï¸")
        text=re.sub(regex, "6",text)
        regex = re.compile("ä¸ƒ|â‘¦|â†|â‘º|â’|â¼|ãˆ¦|â·|â‚‡|ï¼—|â™¹|â“»|7âƒ£ï¸")
        text=re.sub(regex, "7",text)
        regex = re.compile("å…«|â‘§|â‡|â‘»|â’|â½|ãˆ§|â¸|â‚ˆ|ï¼˜|â“¼|8âƒ£ï¸")
        text=re.sub(regex, "8",text)
        regex = re.compile("ä¹|â‘¨|âˆ|â‘¼|â’|â¾|ãˆ¨|â¹|â‚‰|ï¼™|â“½|9âƒ£ï¸")
        text=re.sub(regex, "9",text)

        #ç‰¹æ®Šä¸šåŠ¡å­—ç¬¦æ›¿æ¢
        text=self.strtr(text, {
            "ğŸ… ": "q", "â“ ": "q", "ğ•¢": "q", "á‘«": "q", "ğ": "q", "Ç«": "q",
            "Ù©": "q", "ğ‘„": "q", "â„š": "q", "ê": "q", "kou": "q",
            "\\+": "åŠ ", "â•": "åŠ ", "add": "åŠ ", "ï¼‹": "åŠ ", "jia": "åŠ ",
            "mm": "å¦¹å¦¹", "MM": "å¦¹å¦¹", "é•é“": "ç¾å¥³", "+": "åŠ ", "å˜‰v": "åŠ å¾®ä¿¡",
            "yyds":"æ°¸è¿œçš„ç¥","cnm":"æ“ä½ å¦ˆ","sb":"å‚»b","æ³¡æ³¡":"å¾®ä¿¡"

        })

        #ç½‘å€æ›¿æ¢
        regex = re.compile("((https?|ftp|news):\\/\\/)?([a-z0-9]([a-z0-9\\-]*[\\.ã€‚])+([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))(\\/[a-z0-9_\\-\\.~]+)*(\\/([a-z0-9_\\-\\.]*)(\\?[a-z0-9+_\\-\\.%=&]*)?)?(#[a-z][a-z0-9_]*)?")
        text=re.sub(regex, "#ç½‘å€", text)
        #æ‰‹æœºå·æ›¿æ¢
        regex = re.compile("(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}")
        text=re.sub(regex, "#æ‰‹æœºå·", text)
        #é‚®ç®±æ›¿æ¢
        regex = re.compile("[*#\\u4e00-\\u9fa5 a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}")
        text=re.sub(regex, "#é‚®ç®±", text)
        #QQæ›¿æ¢
        regex = re.compile("[1-9]([0-9]{8,12})")
        patternFilter = r'(\d)\1{3,}|(?:01234|12345|23456|34567|45678|56789|98765|87654|76543|65432|54321|43210)'
        if re.search(patternFilter,text):
            tmp=""
        else:
            text=re.sub(regex, "#QQ", text)

        # å¾®ä¿¡å·è¯†åˆ«è§„åˆ™ï¼š6-20ä½ï¼Œå­—æ¯å¼€å¤´ï¼Œæ’é™¤çº¯è‹±æ–‡å•è¯
        wechat_pattern = r'^[a-zA-Z](?!.*(.)\1{3})(?=.*[\d_-])[a-zA-Z\d_-]{5,19}$'

        text=re.sub(wechat_pattern, '#å¾®ä¿¡', text)


        return text



    #æ£€æµ‹æ‹¼éŸ³å½“ä¸­æ˜¯å¦æœ‰æ•æ„Ÿè¯
    def pinyinReplace(self,text):

        textPingying=self.zh2pinyin(text)

        keyWords={
            "meizi": "å¦¹å­", "koukou": "qq", "weixin": "å¾®ä¿¡", "jiawei": "åŠ å¾®ä¿¡", "jiawo": "åŠ æˆ‘å¾®ä¿¡",
            "haowan": "å¥½ç©", "meizhi": "å¦¹å­", "meinv": "ç¾å¥³", "meilv": "ç¾å¥³", "ca": "æ“", "cao": "æ“", "qiuqiu": "qq",
            "keke": "qq","caonima":"æ“ä½ å¦ˆ","nima":"ä½ å¦ˆçš„","kangkang":"çœ‹çœ‹","jiahui":"åŠ å¾®ä¿¡"

        }
        for i in keyWords.keys():
            if textPingying.find(i)>-1:
                return text+"#pingyin:"+keyWords.get(i)
        return text


    #æå–å­—ç¬¦ä¸²å½“ä¸­çš„æ‰€æœ‰æ•°å­—
    def extractNumberFromString(self,text):
        regex = re.compile("[0-9a-zA-Z_-]{6,}")
        result = re.search(regex, text)
        if result is not None:
            return result.group()
        else:
            return ""

    def remove_symbols_between_numbers(self,text):
        # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä¸¤ä¸¤æ•°å­—ä¹‹é—´çš„ç¬¦å·
        pattern = r'(?<=\d)[\s\W]+(?=\d)'
        # å°†åŒ¹é…åˆ°çš„éƒ¨åˆ†æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²
        result = re.sub(pattern, '', text)
        return result




    #å‰”é™¤ç»„åˆå­—ç¬¦--éå¸¸æœ‰ç”¨
    def dropUnicodeChar(self,text):
        result = []
        for char in text:
            if char.isdigit():
                result.append(char)
            else:
                # è¿‡æ»¤æ‰€æœ‰Unicodeç»„åˆç¬¦å·ï¼ˆåŒ…æ‹¬å˜éŸ³ç¬¦å·ã€æ³¨éŸ³ç¬¦å·ç­‰ï¼‰
                category = unicodedata.category(char)
                if not category.startswith('M'):
                    result.append(char)  # ä¿ç•™éç»„åˆçš„éæ•°å­—å­—ç¬¦ï¼ˆæ ¹æ®éœ€æ±‚å¯é€‰ï¼‰
        return ''.join(result)

    def detectStealthContact(self,text):
        """
        æ£€æµ‹æ–‡æœ¬ä¸­æ˜¯å¦åŒ…å«å˜ä½“è”ç³»æ–¹å¼ï¼ˆå¦‚åŠ å¾®ä¿¡/QQç­‰ï¼‰
        è¿”å›åŒ¹é…åˆ°çš„å˜ä½“æ¨¡å¼åˆ—è¡¨
        """
         # åŒ¹é… "åŠ å¾®ä¿¡" å˜ä½“ï¼ˆåŒ…å«åŒéŸ³å­—ã€ç¬¦å·ã€ç»„åˆç­‰ï¼‰
        wx = r'(?i)([åŠ å®¶çˆä¼½ç”²è´¾â•ï¼‹âœš]|%2[bB]|åŠ [^a-zA-Z0-9]*?[å¾®è–‡vV])[^a-zA-Z0-9]*?[å¾®å«é­ç°å¾½å¨å°¾è–‡vVâœ‰ï¸â¤ï¸â¤ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ–¤ğŸ’”â£ğŸ’•ğŸ’ğŸ’“ğŸ’—ğŸ’–ğŸ’˜ğŸ’ğŸ’ŸxX]'

        # åŒ¹é… "åŠ QQ" å˜ä½“
        qq=  r'(?i)([åŠ å®¶çˆä¼½ç”²è´¾â•ï¼‹âœš]|%2[bB]|åŠ [^a-zA-Z0-9\u4e00-\u9fa5]*?[qQ])[^a-zA-Z0-9\u4e00-\u9fa5]*?[qQğŸ…€ğŸ†€ğŸ¬â’¬â“ ]'

        # åŒ¹é…çº¯ç¬¦å·å˜ä½“ï¼ˆå¦‚+Vã€+qç­‰ï¼‰
        qw= r'(?i)(â•|\+|ï¼‹|%2[bB])[^a-zA-Z0-9\u4e00-\u9fa5]*?[vVqQ]'


        # åŒ¹é…ç»“æœå­˜å‚¨
        for match in re.finditer(wx, text):
            if match:
                return text + "#åŠ å¾®ä¿¡"

        for match in re.finditer(qq, text):
            if match:
                return text + "#åŠ qq"

        for match in re.finditer(qw, text):
            if match:
                return text + "#åŠ qqå¾®ä¿¡"

        #æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„æ•°å­—å­—æ¯ï¼Œæ˜¯å¦æœ‰å¾®ä¿¡qq
        # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ‰€æœ‰å­—æ¯ã€ä¸‹åˆ’çº¿å’Œæ•°å­—
        pattern = r'(?<!\d)[\[({ã€ï¼ˆ<â€»â˜…]*(\d+)[\]})ã€‘ï¼‰>â€»â˜…]*(?!\d)'
        # ä½¿ç”¨ findall æ‰¾å‡ºæ‰€æœ‰åŒ¹é…çš„å­—ç¬¦
        matches = re.findall(pattern, text)
        # å°†åŒ¹é…åˆ°çš„å­—ç¬¦ç»„åˆæˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²
        result = ''.join(matches)
        wechat_pattern = r'^[a-zA-Z](?!.*(.)\1{3})(?=.*[\d_-])[a-zA-Z\d_-]{5,19}$'

        if result!="":
            regex = re.compile("[1-9]([0-9]{8,12})")
            patternFilter = r'(\d)\1{3,}|(?:01234|12345|23456|34567|45678|56789|98765|87654|76543|65432|54321|43210)'
            if re.search(patternFilter, text):
                tmp = ""
            else:
                return text + "#åŠ qq"

            if re.findall(wechat_pattern, result):
                return text + "#åŠ å¾®ä¿¡"
        return text




    def preProcess(self,text):
        """æŠ½å‡ºä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ï¼Œå¿½ç•¥æ ‡ç‚¹ç¬¦å·å’Œç‰¹æ®Šå­—ç¬¦ï¼ˆè¡¨æƒ…ï¼‰
        ä¸€èˆ¬ç”¨ä¸ååƒåœ¾
        """
        #å…¨éƒ¨è½¬æ¢ä¸ºå°å†™,å»æ‰ä¸¤è¾¹ç©ºæ ¼
        text = text.lower().strip()#.replace(" ","")
        #é¢œè¡¨æƒ…è½¬æ¢
        text = self.emojiCase(text)
        #ç®€åŒ–ç»„åˆå­—ç¬¦
        text=self.dropUnicodeChar(text)
        #å…¨è§’è½¬åŠè§’
        text = self.sbcCase(text)
        text = self.circleCase(text)
        text = self.dotCase(text)
        text = self.bracketCase(text)
        text = self.specialCase(text)
        ## å»æ‰åœç”¨è¯
        #text = self.stopWordCase(text)
        #ç¹ä½“è½¬ç®€ä½“
        #text = self.Traditional2Simplified(text)
        #æ£€æµ‹æ‹¼éŸ³å½“ä¸­æ˜¯å¦æœ‰å…³é”®è¯--æœ‰äº›è€—æ—¶
        #text = self.pinyinReplace(text)

        # ç‰¹æ®Šä¸šåŠ¡å­—ç¬¦
        text = self.specialBizCase(text)
        # æ£€æµ‹æ˜¯å¦æœ‰åŠ qqå¾®ä¿¡ç»„åˆ
        #text = self.detectStealthContact(text)




        return text


if __name__ == "__main__":
    #3âƒ•ÌÌ€4âƒ•ÌÌ€0âƒ•ÌÌ€1âƒ•Ì11111115âƒ•ÌÌ€hahaå“ˆåŠ 
    inptStr="âƒ•ÌÌ€4âƒ•ÌÌ€0âƒ•ÌÌ€1âƒ•Ì11111æœˆå°ä¸ƒ ç¥ã€11ã€‘ VIPã€33ã€‘ã€3ã€‘V ã€4ã€‘é—®ç‚¹ç´§å¼ ã€3ã€‘åˆºæ¿€ã€7ã€‘çš„ä¼½ã€1ã€‘"
    textRe=TextPreprocess()
    outputStr=textRe.preProcess(inptStr)
    print("è¾“å…¥ï¼š",inptStr,"\n")
    print("è¾“å‡ºï¼š", outputStr)

    t1=textRe.dropUnicodeChar(inptStr)
    t2=textRe.zh2pinyin(t1)</code></pre>
                        </div>

                        <h3>5.2 ä½¿ç”¨ç¤ºä¾‹</h3>
                        <p>å±•ç¤ºé¢„å¤„ç†ç±»çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>

                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python</span>
                                <button class="code-copy"><i class="bi bi-clipboard"></i> å¤åˆ¶</button>
                            </div>
                            <pre><code class="language-python"># åˆå§‹åŒ–é¢„å¤„ç†ç±»
text_preprocess = TextPreprocess()

# æµ‹è¯•æ ·ä¾‹
test_cases = [
    "åŠ ğŸ… ğŸ… 12345678",
    "å…¨æ–°iPhoneç‰¹ä»·2999å…ƒï¼â•VXå’¨è¯¢",
    "ä»Šå¤©çš„ğŸŒå¤©æ°”çœŸğŸš€ä¸é”™",
    "â‘ ââ‘¢å…¨è§’æ•°å­—æµ‹è¯•",
    "è¯ç¹«æˆ‘å€‘äº†è§£æ›´å¤šä¿¡æ¯"
]

# å¤„ç†æ¯ä¸ªæ ·ä¾‹
for text in test_cases:
    processed = text_preprocess.preProcess(text)
    print(f"åŸå§‹: {text}")
    print(f"å¤„ç†å: {processed}")
    print("-" * 50)</code></pre>
                        </div>

                        <h3>5.3 å¤„ç†æ•ˆæœå¯¹æ¯”</h3>
                        <p>å±•ç¤ºé¢„å¤„ç†å‰åçš„æ•ˆæœå¯¹æ¯”ï¼š</p>

                        <table class="table table-bordered performance-table">
                            <thead>
                                <tr>
                                    <th>åŸå§‹æ–‡æœ¬</th>
                                    <th>å¤„ç†åç»“æœ</th>
                                    <th>è¯´æ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>åŠ ğŸ… ğŸ… 12345678</td>
                                    <td>åŠ qq#æ‰‹æœºå·</td>
                                    <td>ç‰¹æ®ŠQQç¬¦å·è¯†åˆ«+æ‰‹æœºå·æ›¿æ¢</td>
                                </tr>
                                <tr>
                                    <td>â•VXå’¨è¯¢æœ€æ–°äº§å“</td>
                                    <td>åŠ å¾®ä¿¡å’¨è¯¢æœ€æ–°äº§å“#åŠ å¾®ä¿¡</td>
                                    <td>éšè”½å¾®ä¿¡è”ç³»æ–¹å¼æ£€æµ‹</td>
                                </tr>
                                <tr>
                                    <td>ä»Šå¤©çš„ğŸŒå¤©æ°”çœŸğŸš€ä¸é”™</td>
                                    <td>ä»Šå¤©çš„å¤§é˜³å¤©æ°”çœŸç«ç®­ä¸é”™</td>
                                    <td>è¡¨æƒ…ç¬¦å·è½¬æ–‡å­—</td>
                                </tr>
                                <tr>
                                    <td>â‘ ââ‘¢å…¨è§’æ•°å­—æµ‹è¯•</td>
                                    <td>123å…¨è§’æ•°å­—æµ‹è¯•</td>
                                    <td>ç‰¹æ®Šæ•°å­—ç¬¦å·æ ‡å‡†åŒ–</td>
                                </tr>
                                <tr>
                                    <td>è¯ç¹«æˆ‘å€‘äº†è§£æ›´å¤šä¿¡æ¯</td>
                                    <td>è”ç³»æˆ‘ä»¬äº†è§£æ›´å¤šä¿¡æ¯</td>
                                    <td>ç¹ä½“è½¬ç®€ä½“</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>

                    <!-- 6. åº”ç”¨åœºæ™¯ -->
                    <section id="application" class="doc-section">
                        <h2>6. åº”ç”¨åœºæ™¯</h2>

                        <h3>6.1 å†…å®¹å®‰å…¨ä¸å®¡æ ¸</h3>
                        <p>åœ¨å†…å®¹å®‰å…¨é¢†åŸŸï¼Œæ–‡æœ¬é¢„å¤„ç†å¯ä»¥å¸®åŠ©ï¼š</p>
                        <ul>
                            <li><strong>è¯†åˆ«éšè”½å¹¿å‘Š</strong>: æ£€æµ‹å˜ä½“è”ç³»æ–¹å¼ã€æ¨å¹¿å†…å®¹</li>
                            <li><strong>æ•æ„Ÿä¿¡æ¯è¿‡æ»¤</strong>: è¯†åˆ«æ‰‹æœºå·ã€é‚®ç®±ç­‰ä¸ªäººä¿¡æ¯</li>
                            <li><strong>è¿è§„å†…å®¹æ£€æµ‹</strong>: é€šè¿‡æ‹¼éŸ³ã€å˜ä½“è¯†åˆ«æ•æ„Ÿè¯</li>
                        </ul>

                        <h3>6.2 æ–‡æœ¬åˆ†ç±»ä¸èšç±»</h3>
                        <p>æå‡æ–‡æœ¬åˆ†ç±»ä»»åŠ¡çš„å‡†ç¡®æ€§ï¼š</p>
                        <ul>
                            <li><strong>ç‰¹å¾ç»Ÿä¸€</strong>: æ ‡å‡†åŒ–ä¸åŒå½¢å¼çš„åŒä¸€å†…å®¹</li>
                            <li><strong>å™ªå£°å»é™¤</strong>: å‡å°‘æ— å…³å­—ç¬¦å¯¹æ¨¡å‹çš„å½±å“</li>
                            <li><strong>è¯­ä¹‰å¢å¼º</strong>: è¡¨æƒ…ç¬¦å·è½¬æ–‡å­—å¢åŠ è¯­ä¹‰ä¿¡æ¯</li>
                        </ul>

                        <h3>6.3 æœç´¢å¼•æ“ä¼˜åŒ–</h3>
                        <p>æ”¹å–„æœç´¢å¼•æ“çš„æ£€ç´¢æ•ˆæœï¼š</p>
                        <ul>
                            <li><strong>æŸ¥è¯¢æ‰©å±•</strong>: ç¹ç®€ä½“ã€æ‹¼éŸ³ç­‰å¤šç§å½¢å¼æ”¯æŒ</li>
                            <li><strong>çº é”™èƒ½åŠ›</strong>: å¤„ç†å¸¸è§çš„æ‹¼å†™é”™è¯¯å’Œå˜ä½“</li>
                            <li><strong>ç›¸å…³æ€§æå‡</strong>: æ›´å‡†ç¡®çš„æ–‡æœ¬åŒ¹é…</li>
                        </ul>

                        <div class="note-box">
                            <strong>æ€§èƒ½è€ƒè™‘:</strong> åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©é€‚å½“çš„é¢„å¤„ç†æ­¥éª¤ï¼Œå¹³è¡¡å¤„ç†æ•ˆæœå’Œæ€§èƒ½å¼€é”€ã€‚
                        </div>
                    </section>

                    <!-- 7. æ€»ç»“ -->
                    <section id="conclusion" class="doc-section">
                        <h2>7. æ€»ç»“</h2>

                        <p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†ä¸­æ–‡æ–‡æœ¬é¢„å¤„ç†çš„å®Œæ•´æŠ€æœ¯ä½“ç³»ï¼Œæ¶µç›–äº†å­—ç¬¦æ ‡å‡†åŒ–ã€ç‰¹æ®Šç¬¦å·å¤„ç†ã€ç¹ä½“è½¬ç®€ä½“ã€è¡¨æƒ…ç¬¦å·å¤„ç†ã€ä¸šåŠ¡ç‰¹å®šå†…å®¹è¯†åˆ«ç­‰å…³é”®æŠ€æœ¯ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„é¢„å¤„ç†æµç¨‹ï¼Œå¯ä»¥æœ‰æ•ˆæå‡åç»­NLPä»»åŠ¡çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚</p>

                        <h3>7.1 æŠ€æœ¯è¦ç‚¹æ€»ç»“</h3>
                        <p><strong>æ ¸å¿ƒå¤„ç†æŠ€æœ¯:</strong></p>
                        <ul>
                            <li>å­—ç¬¦æ ‡å‡†åŒ–ï¼šå…¨è§’è½¬åŠè§’ã€ç‰¹æ®Šç¬¦å·å¤„ç†</li>
                            <li>æ ¼å¼ç»Ÿä¸€ï¼šç¹ä½“è½¬ç®€ä½“ã€æ•°å­—ç¬¦å·æ ‡å‡†åŒ–</li>
                            <li>å†…å®¹è¯†åˆ«ï¼šè”ç³»æ–¹å¼ã€æ•æ„Ÿä¿¡æ¯æ£€æµ‹</li>
                            <li>è¯­ä¹‰å¢å¼ºï¼šè¡¨æƒ…ç¬¦å·è½¬æ–‡å­—ã€æ‹¼éŸ³å¤„ç†</li>
                        </ul>

                        <h3>7.2 æœ€ä½³å®è·µå»ºè®®</h3>
                        <p>åœ¨å®é™…åº”ç”¨ä¸­å»ºè®®ï¼š</p>
                        <ul>
                            <li>æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šåˆ¶é¢„å¤„ç†æµç¨‹</li>
                            <li>å»ºç«‹æŒç»­æ›´æ–°çš„è§„åˆ™åº“å’Œè¯å…¸</li>
                            <li>å¹³è¡¡å¤„ç†æ•ˆæœå’Œæ€§èƒ½å¼€é”€</li>
                            <li>å®šæœŸè¯„ä¼°å’Œä¼˜åŒ–é¢„å¤„ç†æ•ˆæœ</li>
                        </ul>

                        <div class="note-box">
                            <strong>é™„ä»¶é“¾æ¥:</strong> https://github.com/siriJR/risk-content/tree/main/preProcess
                        </div>
                        <div class="note-box">
                            <strong>æœªæ¥å±•æœ›:</strong> éšç€æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å‘å±•ï¼Œæœªæ¥å¯ä»¥ç»“åˆç¥ç»ç½‘ç»œæ¨¡å‹å®ç°æ›´æ™ºèƒ½çš„æ–‡æœ¬é¢„å¤„ç†ï¼Œå¦‚åŸºäºä¸Šä¸‹æ–‡çš„å­—ç¬¦æ ‡å‡†åŒ–ã€è¯­ä¹‰é©±åŠ¨çš„å˜ä½“è¯†åˆ«ç­‰ã€‚
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <a href="#" class="back-to-top">
        <i class="bi bi-arrow-up"></i>
    </a>

    <!-- é¡µè„š -->
    <footer class="bg-dark text-white py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <h5>é£æ§å†…å®¹å®‰å…¨æŠ€æœ¯æ–‡æ¡£</h5>
                    <p>åˆ†äº«æœ€å‰æ²¿çš„å†…å®¹å®‰å…¨æŠ€æœ¯ä¸å®è·µ</p>
                </div>
                <div class="col-lg-6 text-lg-end">
                    <p>Â© 2025 é£æ§æŠ€æœ¯å›¢é˜Ÿ. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
                    <p>
                        <a href="#" class="text-white me-2"><i class="bi bi-github"></i></a>
                        <a href="#" class="text-white me-2"><i class="bi bi-linkedin"></i></a>
                        <a href="#" class="text-white"><i class="bi bi-envelope"></i></a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        // åˆå§‹åŒ–ä»£ç é«˜äº®
        hljs.highlightAll();

        // è¿”å›é¡¶éƒ¨æŒ‰é’®åŠŸèƒ½
        const backToTop = document.querySelector('.back-to-top');

        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('show');
            } else {
                backToTop.classList.remove('show');
            }
        });

        backToTop.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({top: 0, behavior: 'smooth'});
        });

        // ä»£ç å¤åˆ¶åŠŸèƒ½
        document.querySelectorAll('.code-copy').forEach(button => {
            button.addEventListener('click', function() {
                const codeBlock = this.closest('.code-block');
                const code = codeBlock.querySelector('code').innerText;

                // å¤åˆ¶åˆ°å‰ªè´´æ¿
                navigator.clipboard.writeText(code)
                    .then(() => {
                        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸåé¦ˆ
                        const originalText = this.innerHTML;
                        this.innerHTML = '<i class="bi bi-check"></i> å·²å¤åˆ¶';
                        this.classList.add('copied');

                        // 2ç§’åæ¢å¤åŸå§‹çŠ¶æ€
                        setTimeout(() => {
                            this.innerHTML = originalText;
                            this.classList.remove('copied');
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('å¤åˆ¶å¤±è´¥:', err);
                    });
            });
        });
    </script>
</body>
</html>